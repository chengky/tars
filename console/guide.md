# TARS 使用文档

## 主要页面及功能

- 包管理
  - 搜索包
  - 包详情
    - 版本列表
      - 版本详情
      - 版本实例列表
    - 实例列表
    - 权限设置
    - 任务列表
    - 创建新版本
  - 创建新包
- 我的任务列表
  - 任务详情
- 设备管理
  - 批量导入设备密码
- 业务管理
  - 批量导入业务
- 用户管理（管理员）
  - 批量导入用户
- 我的账户
  - 修改账户密码

说明：启用第三方登录时，没有“用户管理”和“我的账户”页面。

## 准备

- 添加业务（可以理解为程序包的分类），入口：

  ![product-entry](http://km.oa.com/files/photos/pictures/201504/1430376189_44_w400_h130.png)

- 如果后台需要密码登陆设备，请先导入设备密码，入口：

  ![devices](http://km.oa.com/files/photos/pictures/201504/1430376332_12_w230_h64.png)

  - 否则，执行程序包的发布等任务时，会出现“无法登录机器”的错误

- 如果启用第三方登录，请先参考 `前台开发文档` 进行相关配置

- 如果未启用第三方登录，请先使用默认 `admin` 账户登录（默认密码为 `admin`），管理用户列表，入口：

  ![users-entry](http://km.oa.com/files/photos/pictures/201504/1430376723_18_w350_h179.png)

- 注意：只有系统管理员可以进行业务管理/用户管理

  - 启用第三方登录时，系统管理员在前台站点的配置文件中，具体请参考 `前台开发文档`
  - 未启用第三方登录时，在 `用户管理` 页面里管理

## 创建新包

1. 入口：

  ![new-pkg](http://km.oa.com/files/photos/pictures/201504/1429780934_36_w400_h60.png)

2. 填写基本信息：

  ![new-pkg-start](http://km.oa.com/files/photos/pictures/201504/1429781533_73_w1020_h600.png)

3. 文件管理：（文件的管理是在该包的工作目录实时生效的）

  ![new-pkg-files](http://km.oa.com/files/photos/pictures/201504/1429783094_68_w1020_h590.png)

4. 进程及调度等配置：

  ![new-pkg-config](http://km.oa.com/files/photos/pictures/201504/1429783100_47_w1020_h600.png)

5. 保存或提交：（保存将保存当前各项配置，下次创建同名的包时，将自动读取；提交则将创建这个包）

  ![new-pkg-submit](http://km.oa.com/files/photos/pictures/201504/1429783104_94_w250_h60.png)

## 安装

1. 入口：（版本详情页面）

  ![install](http://km.oa.com/files/photos/pictures/201504/1429788659_90_w1220_h260.png)

2. 安装界面：

  ![install-dialog](http://km.oa.com/files/photos/pictures/201504/1429788642_85_w540_h420.png)

3. 安装将启动异步任务，并跳转到任务详情页面
4. 任务详情页面：

  ![task-detail](http://km.oa.com/files/photos/pictures/201504/1429788667_20_w1020_h540.png)

## 包详情

默认为版本列表页面：

![version-list](http://km.oa.com/files/photos/pictures/201504/1429789256_95_w1220_h460.png)

- 可按版本号、创建者搜索版本，按时间排序等
- 点击版本号，进入版本详情页面
- 点击列表右侧实例数字，进入对应版本实例列表
- 列表中有对应版本的安装、下载、删除等快捷按钮
- 右侧导航在版本列表、实例列表、权限设置、任务列表等页面切换

## 创建新版本

1. 入口在包详情（版本列表）页面左上角
2. 操作流程和创建新包基本一致

## 升级

1. 入口在包的实例列表页面
2. 勾选要升级的IP后，点击“升级按钮”
3. 升级界面：

  ![upgrade](http://km.oa.com/files/photos/pictures/201504/1429790606_75_w1220_h680.png)

4. 升级将启动异步任务，并跳转到任务详情页面

## 其它发布操作（启动/停止/重启/卸载/回滚等）

1. 入口在包的实例列表页面
2. 操作流程和升级基本一致

## 我的任务列表

顶部导航上有一个任务（安装/升级/重启等发布任务）图标，有三种状态：

  - 有正在运行的未读任务
  - 没有正在运行，但有失败的未读任务（橙色圆点）
  - 没有正在运行或失败的未读任务（绿色圆点）

鼠标移动上去后，将显示未读任务列表。

点击图标，将进入“我的任务列表”页面。

如下图所示：

  ![tasks](http://km.oa.com/files/photos/pictures/201504/1429790614_82_w1200_h800.png)
